
# Chat App ‚Äì Telehealth Fullstack Test (Junior)

‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡πá‡∏Å‡∏ï‡πå‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÅ‡∏≠‡∏õ‡πÅ‡∏ä‡∏ó‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå (polling) ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢ **Next.js 14 (App Router)** ‡πÅ‡∏•‡∏∞ **TypeScript + Tailwind CSS**  
‡πÉ‡∏ä‡πâ in‚Äëmemory database (‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏≥) ‡∏ï‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ç‡∏≠‡∏á‡πÇ‡∏à‡∏ó‡∏¢‡πå Telehealth Developer Fullstack test ‚Äì Junior

---

## üîß Tech Stack

- **Next.js (App Router)**
- **TypeScript**
- **Tailwind CSS**
- **In‚Äëmemory DB** (‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô `lib/db.ts`)
- ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏†‡∏≤‡∏¢‡∏ô‡∏≠‡∏Å / ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£ auth ‡∏à‡∏£‡∏¥‡∏á ‡πÉ‡∏ä‡πâ `userId` ‡∏à‡∏≤‡∏Å query string ‡πÅ‡∏ó‡∏ô

---

##  ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡πá‡∏Å‡∏ï‡πå‡∏´‡∏•‡∏±‡∏Å

```text
app/
  api/
    conversations/
      route.ts                 # GET/POST /api/conversations
    conversations/[id]/messages/
      route.ts                 # GET/POST /api/conversations/:id/messages
    users/me/
      route.ts                 # GET /api/users/me
  components/
    ChatRoom.tsx               # ‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏ä‡∏ó‡∏î‡πâ‡∏≤‡∏ô‡∏Ç‡∏ß‡∏≤
    ConversationList.tsx       # ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏ä‡∏ó‡∏î‡πâ‡∏≤‡∏ô‡∏ã‡πâ‡∏≤‡∏¢ + ‡∏õ‡∏∏‡πà‡∏° Start
  select-user/
    page.tsx                   # ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å user ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡πÅ‡∏ä‡∏ó
  layout.tsx                   # Layout ‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡πÅ‡∏≠‡∏õ
  page.tsx                     # ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏ä‡∏ó‡∏´‡∏•‡∏±‡∏Å (‡∏≠‡πà‡∏≤‡∏ô userId ‡∏à‡∏≤‡∏Å query)

lib/
  db.ts                        # in-memory database (users, conversations, messages)

public/
  favicon.ico                  # ‡πÑ‡∏≠‡∏Ñ‡∏≠‡∏ô‡∏Ç‡∏≠‡∏á‡πÄ‡∏ß‡πá‡∏ö

README.md
next.config.ts
tsconfig.json
package.json
```

---

##  ‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡πá‡∏Å‡∏ï‡πå

```bash
# ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á dependencies
npm install

# ‡∏£‡∏±‡∏ô dev server
npm run dev

# ‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå
http://localhost:3000
```

> ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏µ‡πà `http://localhost:3000` ‡∏ï‡∏£‡∏á ‡πÜ  
> ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞ redirect ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ `/select-user` ‡πÉ‡∏´‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£‡∏Å‡πà‡∏≠‡∏ô

---

##  ‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (Current User)

‡∏£‡∏∞‡∏ö‡∏ö‡∏°‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏à‡∏≥‡∏•‡∏≠‡∏á 3 ‡∏Ñ‡∏ô (‡πÄ‡∏Å‡πá‡∏ö‡πÉ‡∏ô `lib/db.ts`):

- `Ant` (id: 1)
- `Bee` (id: 2)
- `Cat` (id: 3)

### Flow

1. ‡πÄ‡∏Ç‡πâ‡∏≤ `/` ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å  
   ‚Üí ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ `?userId=...` ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å redirect ‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ `/select-user`
2. ‡∏´‡∏ô‡πâ‡∏≤ `/select-user`  
   ‚Üí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Ant / Bee / Cat ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏õ‡πá‡∏ô ‚Äú‡∏ï‡∏±‡∏ß‡πÄ‡∏£‡∏≤‚Äù ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏ä‡∏ó  
   ‚Üí ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞ `push` ‡πÑ‡∏õ‡∏ó‡∏µ‡πà `/?userId=<id>`
3. ‡∏´‡∏ô‡πâ‡∏≤ `/` (‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏ä‡∏ó‡∏´‡∏•‡∏±‡∏Å)  
   ‚Üí ‡∏≠‡πà‡∏≤‡∏ô `userId` ‡∏à‡∏≤‡∏Å query, ‡∏ï‡∏±‡πâ‡∏á‡πÄ‡∏õ‡πá‡∏ô `currentUserId`  
   ‚Üí ‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∑‡πà‡∏≠ / avatar / ‡∏™‡∏µ‡∏Ç‡∏≠‡∏á user ‡∏ô‡∏±‡πâ‡∏ô‡πÉ‡∏ô header  
   ‚Üí ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° **Switch User** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏´‡∏ô‡πâ‡∏≤ `/select-user` ‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÑ‡∏î‡πâ

---

##  ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ù‡∏±‡πà‡∏á Frontend

### 1. ConversationList (Sidebar)

‡πÑ‡∏ü‡∏•‡πå: `app/components/ConversationList.tsx`

- ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏ä‡∏ó‡∏Ç‡∏≠‡∏á `currentUserId`
- ‡πÅ‡∏™‡∏î‡∏á:
  - ‡∏ä‡∏∑‡πà‡∏≠‡∏≠‡∏µ‡∏Å‡∏ù‡πà‡∏≤‡∏¢‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á (‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà current user)
  - ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á
  - ‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏ö‡∏ö‡∏¢‡πà‡∏≠ ‡πÜ ‡πÄ‡∏ä‡πà‡∏ô `4m ago`, `2h ago`, `Yesterday`
- ‡∏°‡∏µ‡∏õ‡∏∏‡πà‡∏° **Start** ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏´‡πâ‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà:
  - Dropdown ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏µ‡∏Å‡∏ù‡πà‡∏≤‡∏¢ (‡πÄ‡∏ä‡πà‡∏ô Ant ‡∏Ñ‡∏∏‡∏¢‡∏Å‡∏±‡∏ö Bee ‡∏´‡∏£‡∏∑‡∏≠ Cat)
  - ‡∏Å‡∏î Start ‚Üí ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å `POST /api/conversations?userId=<currentUserId>`
  - ‡∏ñ‡πâ‡∏≤‡∏´‡πâ‡∏≠‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏™‡∏≠‡∏á‡∏Ñ‡∏ô‡∏ô‡∏±‡πâ‡∏ô‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡∏à‡∏∞‡πÉ‡∏ä‡πâ‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏°
  - ‡∏à‡∏≤‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏±‡πâ‡∏ô‡πÉ‡∏ô sidebar ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
- ‡∏°‡∏µ loading state ‡πÅ‡∏•‡∏∞ error state:
  - ‡∏Ç‡∏ì‡∏∞‡πÇ‡∏´‡∏•‡∏î: ‡πÅ‡∏™‡∏î‡∏á ‚ÄúLoading‚Ä¶‚Äù
  - ‡∏ñ‡πâ‡∏≤ API error: ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° error

### 2. ChatRoom (Main Chat Area)

‡πÑ‡∏ü‡∏•‡πå: `app/components/ChatRoom.tsx`

- ‡∏£‡∏±‡∏ö props:
  - `currentUserId`
  - `selectedConversationId`
  - `onMessageSent` (callback ‡πÅ‡∏à‡πâ‡∏á sidebar ‡πÉ‡∏´‡πâ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä)
- ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå:
  - ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏î‡πâ‡∏ß‡∏¢ `GET /api/conversations/:id/messages?userId=<currentUserId>`
  - ‡πÉ‡∏ä‡πâ polling ‡∏ó‡∏∏‡∏Å 2 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ ‡πÅ‡∏•‡∏∞ refetch ‡∏´‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
  - ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô bubble ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•:
    - ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á
    - ‡πÄ‡∏ß‡∏•‡∏≤ (‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏õ‡πá‡∏ô HH:MM ‡∏ï‡∏≤‡∏° locale)
    - ‡∏à‡∏±‡∏î‡∏ä‡∏¥‡∏î‡∏Ç‡∏ß‡∏≤‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
  - ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á: ‡πÅ‡∏™‡∏î‡∏á ‚ÄúNo messages yet. Say hi!‚Äù
  - ‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°:
    - ‡∏ä‡πà‡∏≠‡∏á input + ‡∏õ‡∏∏‡πà‡∏° Send
    - disable ‡∏õ‡∏∏‡πà‡∏°‡∏ñ‡πâ‡∏≤:
      - ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
      - ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏≠‡∏¢‡∏π‡πà
      - ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏´‡πâ‡∏≠‡∏á
    - ‡∏™‡πà‡∏á `POST /api/conversations/:id/messages?userId=<currentUserId>`
    - ‡∏ñ‡πâ‡∏≤‡∏™‡πà‡∏á‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° error ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á

---

##  In‚ÄëMemory Database

‡πÑ‡∏ü‡∏•‡πå: `lib/db.ts`

‡πÉ‡∏ä‡πâ global variable (`globalThis.__db`) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ state ‡∏≠‡∏¢‡∏π‡πà‡πÑ‡∏î‡πâ‡∏Ç‡πâ‡∏≤‡∏° hot reload ‡πÉ‡∏ô dev mode

‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢:

```ts
interface User {
  id: number;
  name: string;
}

interface Conversation {
  id: number;
  participantIds: number[];
}

interface Message {
  id: number;
  conversationId: number;
  senderId: number;
  content: string;
  timestamp: string; // ISO string
}
```

‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô (seed):

- ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ 3 ‡∏Ñ‡∏ô: Ant, Bee, Cat
- ‡∏´‡πâ‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á 2 ‡∏´‡πâ‡∏≠‡∏á:
  - id 101: Ant ‚Äì Bee
  - id 102: Ant ‚Äì Cat
- ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏õ‡∏£‡∏±‡∏ö‡πÅ‡∏Å‡πâ seed data ‡πÑ‡∏î‡πâ‡πÉ‡∏ô `initialDb`

---

##  REST API

### 1. GET `/api/users/me?userId=<id>`

‡∏Ñ‡∏∑‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ï‡∏≤‡∏° `userId`.

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á response**

```json
{
  "id": 1,
  "name": "Ant"
}
```

‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏≥‡∏•‡∏≠‡∏á endpoint current user ‡∏ï‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ç‡∏≠‡∏á‡πÇ‡∏à‡∏ó‡∏¢‡πå

---

### 2. GET `/api/conversations?userId=<currentUserId>`

‡∏Ñ‡∏∑‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà user ‡∏Ñ‡∏ô‡∏ô‡∏±‡πâ‡∏ô‡∏≠‡∏¢‡∏π‡πà

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á response (‡πÅ‡∏ï‡πà‡∏•‡∏∞ item)**

```json
{
  "id": 101,
  "otherParticipant": {
    "id": 2,
    "name": "Bee"
  },
  "lastMessage": {
    "content": "Hi Bee!",
    "timestamp": "2025-11-12T10:00:00Z"
  }
}
```

- ‡∏à‡∏±‡∏î‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î‡∏≠‡∏¢‡∏π‡πà‡∏ö‡∏ô‡∏™‡∏∏‡∏î

---

### 3. POST `/api/conversations?userId=<currentUserId>`

‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡πâ‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á `currentUserId` ‡∏Å‡∏±‡∏ö‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏ô

**Request body**

```json
{
  "participantId": 2
}
```

- ‡∏ñ‡πâ‡∏≤‡∏´‡πâ‡∏≠‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏™‡∏≠‡∏á‡∏Ñ‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏Ñ‡∏¢‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß ‚Üí ‡∏Ñ‡∏∑‡∏ô‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏° (200)
- ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ ‚Üí ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡∏∞‡∏Ñ‡∏∑‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡πâ‡∏≠‡∏á (201)
- Validation:
  - ‡∏ñ‡πâ‡∏≤‡∏Ç‡∏≤‡∏î `userId` ‡∏´‡∏£‡∏∑‡∏≠ `participantId` ‚Üí status 400
  - ‡∏ñ‡πâ‡∏≤ `participantId` ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö `currentUserId` ‚Üí status 400
  - ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡∏û‡∏ö user ‚Üí status 404

---

### 4. GET `/api/conversations/:id/messages?userId=<currentUserId>`

‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏±‡πâ‡∏ô

- ‡πÄ‡∏ä‡πá‡∏Å‡∏ß‡πà‡∏≤ `currentUserId` ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÉ‡∏ô `participantIds` ‡∏Ç‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á  
  ‚Üí ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà ‡∏Ñ‡∏∑‡∏ô 403 (Forbidden)

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á response**

```json
[
  {
    "id": 1001,
    "content": "Hi Bee!",
    "createdAt": "2025-11-12T10:00:00Z",
    "sender": {
      "id": 1,
      "name": "Ant"
    }
  }
]
```

---

### 5. POST `/api/conversations/:id/messages?userId=<currentUserId>`

‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á

**Request body**

```json
{
  "content": "Hello!"
}
```

- ‡πÄ‡∏ä‡πá‡∏Å‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ö GET (user ‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏´‡πâ‡∏≠‡∏á)
- ‡∏™‡∏£‡πâ‡∏≤‡∏á `id` ‡πÉ‡∏´‡∏°‡πà‡∏à‡∏≤‡∏Å max id ‡πÄ‡∏î‡∏¥‡∏° + 1
- ‡πÄ‡∏ã‡πá‡∏ï `timestamp` ‡πÄ‡∏õ‡πá‡∏ô `new Date().toISOString()`
- ‡∏Ñ‡∏∑‡∏ô message ‡∏ó‡∏µ‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà (status 201)

---

##  Authorization

‡πÅ‡∏°‡πâ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏∞‡∏ö‡∏ö login ‡∏à‡∏£‡∏¥‡∏á ‡πÅ‡∏ï‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏•‡∏≠‡∏á auth ‡∏ï‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î:

- ‡∏ó‡∏∏‡∏Å endpoint ‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏ä‡∏ó‡πÉ‡∏ä‡πâ `userId` ‡∏à‡∏≤‡∏Å query string
- ‡∏ó‡∏∏‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏Å `/api/conversations/:id/messages` (GET/POST) ‡∏à‡∏∞‡πÄ‡∏ä‡πá‡∏Å‡∏ß‡πà‡∏≤:
  - ‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏±‡πâ‡∏ô‡∏°‡∏µ `participantIds` ‡∏£‡∏ß‡∏° `currentUserId` ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà
  - ‡∏ñ‡πâ‡∏≤‡πÑ‡∏°‡πà ‚Üí ‡∏Ñ‡∏∑‡∏ô `403 Forbidden: you are not in this conversation`

---

##  ‡∏à‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏ï‡∏≤‡∏°‡∏Ç‡πâ‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÇ‡∏à‡∏ó‡∏¢‡πå

- ‡πÉ‡∏ä‡πâ **Next.js App Router + TypeScript + Tailwind**
- ‡πÅ‡∏¢‡∏Å frontend / backend ‡∏ú‡πà‡∏≤‡∏ô `app` ‡πÅ‡∏•‡∏∞ `app/api`
- ‡πÉ‡∏ä‡πâ **in‚Äëmemory DB** ‡πÅ‡∏ó‡∏ô database ‡∏à‡∏£‡∏¥‡∏á
- ‡∏°‡∏µ API ‡∏ï‡∏≤‡∏°‡∏ó‡∏µ‡πà‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏£‡∏∞‡∏ö‡∏∏:
  - `/users/me`
  - `/conversations` (GET/POST)
  - `/conversations/:id/messages` (GET/POST)
- ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÉ‡∏´‡πâ user ‡πÄ‡∏´‡πá‡∏ô‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
- Frontend ‡∏°‡∏µ:
  - ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏ä‡∏ó + ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î + ‡πÄ‡∏ß‡∏•‡∏≤
  - ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡πâ‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å UI
  - ‡∏°‡∏µ‡πÅ‡∏ä‡∏ó‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° ‡πÅ‡∏•‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏π‡πâ‡∏™‡πà‡∏á/‡πÄ‡∏ß‡∏•‡∏≤
  - ‡∏°‡∏µ loading states ‡πÅ‡∏•‡∏∞ error handling
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÄ‡∏•‡∏∑‡∏≠‡∏Å user ‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏ô (Ant/Bee/Cat) ‡∏à‡∏≤‡∏Å‡∏´‡∏ô‡πâ‡∏≤ `/select-user`

---

##  ‡πÑ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡∏ï‡πà‡∏≠‡∏¢‡∏≠‡∏î (Future Work)

- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏à‡∏≤‡∏Å in‚Äëmemory DB ‡πÑ‡∏õ‡πÉ‡∏ä‡πâ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏£‡∏¥‡∏á (PostgreSQL, Prisma)
- ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏ö‡∏ö login ‡∏à‡∏£‡∏¥‡∏á (NextAuth, JWT ‡∏Ø‡∏•‡∏Ø)
- ‡πÉ‡∏ä‡πâ WebSocket / Pusher / Ably ‡πÅ‡∏ó‡∏ô polling ‡πÄ‡∏û‡∏∑‡πà‡∏≠ realtime ‡∏à‡∏£‡∏¥‡∏á ‡πÜ
- ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô unit tests / integration tests ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö API

---

‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÇ‡∏Ñ‡πâ‡∏î‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏´‡∏ô ‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡∏ä‡πà‡∏ß‡∏¢ refactor ‡∏™‡πà‡∏ß‡∏ô‡πÉ‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ñ‡∏≤‡∏°‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ üôÇ
